<div align=center>
    <h1>å°èˆ</h1>
    <img src="https://img.shields.io/github/stars/yesmore/italk-uniapp.svg" alt="star"/>
    <img src="https://img.shields.io/github/forks/yesmore/italk-uniapp" alt="star"/>
</div>

<br>

> ç¾å›½å…å¤‡æ¡ˆvpsï¼Œ2æ ¸2G é…ç½®ä»…éœ€20.98$â‰ˆ145RMB/å¹´ï¼Œæ”¯æŒæ”¯ä»˜å®ä»˜æ¬¾ï¼ŒğŸ’[ç‚¹å‡»ä¼˜æƒ é“¾æ¥ç›´è¾¾](https://my.racknerd.com/aff.php?aff=10906&pid=681)

> **Warning**
> ç”±äºæœåŠ¡å™¨è´¹ç”¨é«˜æ˜‚ï¼Œæœ¬é¡¹ç›®çº¿ä¸Šé¢„è§ˆç‰ˆå°†äº**2023/12**ä¸‹çº¿ã€‚
> 
> çº¿ä¸Šé¡¹ç›® [http://italk.aoau.top](http://italk.aoau.top) æ³¨å†ŒåŠŸèƒ½å·²ä¿®å¤ï¼›**é¡¹ç›®ä¸é™æœŸæ›´æ–°**ã€‚
>
> æ³¨æ„ï¼šæœ¬é¡¹ç›®ä»…ç”¨äºç¼–ç¨‹å­¦ä¹ ï¼æœ¬é¡¹ç›®ä»…ç”¨äºç¼–ç¨‹å­¦ä¹ ï¼æœ¬é¡¹ç›®ä»…ç”¨äºç¼–ç¨‹å­¦ä¹ ï¼

## åŠŸèƒ½ä»‹ç»

- ä»¿ QQã€VX çš„èŠå¤©ç¤¾äº¤app
- å³æ—¶é€šè®¯æŠ€æœ¯
- å…¨æ ˆæ¶æ„
- UIè§„èŒƒåŒ–

## å¿«é€Ÿä½“éªŒ

é¡¹ç›®åœ°å€ï¼šhttp://italk.aoau.top ï¼ˆå»ºè®®ç§»åŠ¨ç«¯æµè§ˆå™¨è®¿é—®ï¼‰

apkè‡ªæï¼šhttps://pan.baidu.com/s/14i6yiGFdAuQgSCcQbcU45w  æå–ç ï¼š`q29u`

è¡ç”Ÿäº§å“ï¼šå°èˆå›¾ç‰‡Api [https://github.com/yesmore/photosapi](https://github.com/yesmore/photosapi) æœ¬é¡¹ç›®å·²æ¥å…¥ã€‚ï¼ˆæ­¤æ¥å£å·²é‡æ„ï¼Œæ–°å¢ **CDN** åŠ é€Ÿã€**pvç»Ÿè®¡**åŠŸèƒ½ï¼‰

æ›´å¤šé¡¹ç›®è¯·è®¿é—®ä¸»é¡µï¼šhttps://github.com/yesmore




## æŠ€æœ¯æ ˆ

å‰ç«¯ï¼š`vue`+`uni-app`+`sass`

åç«¯ï¼š`Nodejs(express)`+`mongoDB`

é€šä¿¡ï¼š`Websocket(socket.io)`

**Development Tool**: `HBuilderX`+`WebStorm`

**Developing env**: `Windows `å¼€å‘+`Linux(Nginx)` éƒ¨ç½²

> **Why uni-app?**
>
> 1.ç®€æ´çš„è·¨å¹³å°å¼€å‘æ¡†æ¶ï¼Œä¸€æ¬¡å¼€å‘å¤šå¹³å°ä¸Šçº¿ï¼ˆAndroidã€iosã€å°ç¨‹åºï¼‰ã€‚
>
> 2.å¼€å‘å‰ç½®æ¡ä»¶ä½ï¼Œåªéœ€æŒæ¡`vue`å³å¯å¿«é€Ÿä¸Šæ‰‹ã€‚
>
> **Why  websocketï¼Ÿ**
>
> 1.ä¸åŒäº`http`åè®®ï¼Œè¯¦æƒ…æŸ¥çœ‹å®˜ç½‘ã€‚
>
> 2.æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯åŒå‘æ•°æ®ç»‘å®šã€‚
>
> 3.å°è£…çš„`socket.io`åº“ç®€æ´APIï¼Œæ–¹ä¾¿å¿«é€Ÿä¸Šæ‰‹ã€‚
>
> 4.æ­¤é¡¹ç›®ä¸ºæœ¬äººå­¦ä¹ websocketé¡¹ç›®ï¼Œä»¥å‡†å¤‡åæœŸå¼€å‘ç‰©è”ç½‘é¡¹ç›®æ‰“åŸºç¡€ã€‚
>
> **Why expressï¼Ÿ**
>
> 1.`express`æ˜¯åŸºäº`nodejs`æ ‡å‡†åº“`http`å°è£…çš„webåç«¯æ¡†æ¶ï¼Œæ–¹ä¾¿å‰ç«¯äººå‘˜å¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹ æˆæœ¬è¾ƒä½ã€‚




## åŠŸèƒ½åˆ—è¡¨

**ç™»é™†ç•Œé¢**

- [x] æ”¯æŒç”¨æˆ·å/é‚®ç®±åŒ¹é…ç™»é™†
- [x] å®æ—¶åé¦ˆåŒ¹é…ç»“æœ
- [x] å¯†ç æ ¡éªŒ

**æ³¨å†Œç•Œé¢**

- [x] æ”¯æŒç”¨æˆ·å/é‚®ç®±å·²å­˜åœ¨æç¤º
- [x] æ”¯æŒæç¤ºè¡¨å•é¡¹æ˜¯å¦å¡«å†™å®Œæ•´
- [x] å¯†ç å¤æ‚åº¦åé¦ˆ

**ä¸»é¡µç•Œé¢**

- [x] å¥½å‹æ¶ˆæ¯æç¤º
- [x] å¥½å‹ç”³è¯·æç¤º
- [x] æœ€åä¸€æ¡æ¶ˆæ¯åŠå‘é€æ—¶é—´æ¸²æŸ“
- [x] æœ€æ–°æ¶ˆæ¯æ’åº
- [ ] ç¾¤æ¶ˆæ¯æç¤º
- [ ] ç¾¤ä¸å¥½å‹åˆ—è¡¨æ¸²æŸ“ä¼˜å…ˆçº§
- [ ] å¤§å…å…¥å£ï¼ˆæ— éœ€åˆ›å»ºç¾¤èŠï¼‰

**æœç´¢ç•Œé¢**

- [x] æ­£åˆ™åŒ¹é…æŸ¥è¯¢æ•°æ®åº“
- [x] æœç´¢æ‰€æœ‰æ³¨å†Œç”¨æˆ·
- [x] æ­£åˆ™åŒ¹é…æ¸²æŸ“æŒ‡å®šå­—ç¬¦ï¼ˆä¸²ï¼‰
- [x] æ·»åŠ å¥½å‹åŠŸèƒ½
- [ ] ç§èŠçª—å£å…¥å£

**èµ„æ–™å¡ç•Œé¢**

- [x] å¥½å‹æ˜µç§°ã€å¤‡æ³¨ã€ä¸ªæ€§ç­¾åæ¸²æŸ“
- [ ] ç§èŠçª—å£å…¥å£
- [x] å¥½å‹è¯¦æƒ…ç•Œé¢å…¥å£

**è¯¦æƒ…ç•Œé¢**

- [x] ç”¨æˆ·è¯¦æƒ…ä¿®æ”¹ï¼ˆå¤´åƒã€ç­¾åã€æ˜µç§°ã€æ€§åˆ«ã€ç”Ÿæ—¥ã€ç”µè¯ã€é‚®ç®±ï¼‰
- [ ] ç”¨æˆ·å¯†ç ä¿®æ”¹
- [x] ä¿®æ”¹å­˜å‚¨æ•°æ®åº“
- [x] é€€å‡ºç™»å½•åŠŸèƒ½
- [x] åˆ é™¤å¥½å‹åŠŸèƒ½

**å¥½å‹ç§èŠçª—å£**

- [x] å‘é€æ–‡å­—æ¶ˆæ¯
- [x] å‘é€å›¾ç‰‡æ¶ˆæ¯
- [ ] å‘é€è¯­éŸ³æ¶ˆæ¯ï¼ˆå…¼å®¹æ€§ï¼‰
- [x] å‘é€å®šä½æ¶ˆæ¯ï¼ˆæœªå®Œå–„ï¼‰
- [x] å‘é€è¡¨æƒ…æ¶ˆæ¯
- [x] æ‹æ‘„ç…§ç‰‡åŠŸèƒ½
- [ ] å‘é€æ–‡ä»¶æ¶ˆæ¯
- [ ] å‘é€è§†é¢‘æ¶ˆæ¯

**å¥½å‹åŠ¨æ€**

- [ ] åŠ¨æ€åˆ—è¡¨æ¸²æŸ“
- [ ] åŠ¨æ€è¯¦æƒ…æŸ¥çœ‹
- [ ] åˆ†äº«åŠ¨æ€æ¶ˆæ¯




## Project

### é¡¹ç›®ç›®å½•

> æš‚æœªå®Œå–„
> 
**å‰ç«¯**

```javascript
â”Œ- 
â”œ-	commons/					// é…ç½®æ–‡ä»¶
    â”œ-	db.js				// è¿æ¥æ•°æ®åº“é…ç½®
    â”œ-  
â”œ-	components/					// æ•°æ®æ¨¡å‹
    â”œ-	
â”œ-	pages/				// ä¸­é—´ä»¶
    â”œ-	err.js				// é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”œ-	static/					// åç«¯è·¯ç”±
    â”œ-	index.js
â”œ-	App.vue					// 
â”œ-	main.js						//
â”œ-	pages.json				// å…¥å£
â”œ-	manifest.json
â”œ-	project.config.json			 // ç‰ˆæœ¬æ§åˆ¶
â”œ-	uni.scss		 // ç‰ˆæœ¬æ§åˆ¶
â”œ-	README.md				// readme
â””-	
```

**åç«¯**

```javascript
â”Œ- 
â”œ-	config/					// é…ç½®æ–‡ä»¶
    â”œ-	db.js				// è¿æ¥æ•°æ®åº“é…ç½®
    â”œ-  
â”œ-	model/					// æ•°æ®æ¨¡å‹
    â”œ-	
â”œ-	middleware/				// ä¸­é—´ä»¶
    â”œ-	err.js				// é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”œ-	router/					// åç«¯è·¯ç”±
    â”œ-	index.js
â”œ-	server/					// 
    â”œ-
â”œ-	dao/					//
    â”œ-
â”œ-	app.js					// å…¥å£
â”œ-	package.json			 // ç‰ˆæœ¬æ§åˆ¶
â”œ-	package-lock.json		 // ç‰ˆæœ¬æ§åˆ¶
â”œ-	README.md				// readme
â””-	

```

## æ’ä»¶

|        åŒ…        |  ç‰ˆæœ¬   |        å¤‡æ³¨        |
| :--------------: | :-----: | :----------------: |
|     **cors**     |  2.8.5  |      è·¨åŸŸå¤„ç†      |
|   **express**    | 4.17.1  |      webæ¡†æ¶       |
|   **mongoose**   | 5.12.10 |       æ•°æ®åº“       |
| **require-all**  |  3.0.0  | åŠ è½½ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ |
| **body-parser**  | 1.19.0  |    è·å–å‰ç«¯æ•°æ®    |
|  **nodemailer**  |  6.6.0  |      é‚®ç®±æ’ä»¶      |
|   **bcryptjs**   |  2.4.3  |      å¯†ç åŠ å¯†      |
| **jsonwebtoken** |  8.5.1  |   tokenèº«ä»½éªŒè¯    |
|    **multer**    |  1.4.2  |    æ–‡ä»¶ä¸Šä¼ æ’ä»¶    |
|  **socket.io**   |  2.3.0  |    åç«¯é€šè®¯æ¨¡å—    |
| weapp.socket.io  |  2.0.6  |    å‰ç«¯é€šè®¯æ¨¡å—    |

> åç«¯æ’ä»¶



## å‰ç«¯è·¯ç”±

|       è·¯ç”±       | å‚æ•° |  ç±»å‹   |    å¤‡æ³¨    |
| :--------------: | :--: | :-----: | :--------: |
|      /index      |  /   |         |    é¦–é¡µ    |
|     /signin      |  /   |         |   ç™»å½•é¡µ   |
|     /signup      |  /   |         |   æ³¨å†Œé¡µ   |
| /userhome?id=xxx |  id  | Num/Str | ç”¨æˆ·å”¯ä¸€id |
|     /search      |  /   |         |  å¥½å‹æœç´¢  |



## äº¤äº’é€»è¾‘

| æ ‡é¢˜           | é€»è¾‘                                                         | å¤‡æ³¨ |
| -------------- | :----------------------------------------------------------- | ---- |
| å‰åç«¯äº¤äº’æµç¨‹ | **å‰ç«¯å‘é€è¯·æ±‚** `â†’` **åŒ¹é…åç«¯è·¯ç”±** `â†’` **serverå¤„ç†å‡½æ•°** `â†’` **dbserver CRUD** `âˆ` **db** |      |
| å‰åç«¯äº¤äº’éªŒè¯ | 1. ç™»é™†æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€ç”¨æˆ·åå¯†ç <br/>2. æœåŠ¡ç«¯éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®ï¼Œæ ¡éªŒé€šè¿‡å°±ä¼šç”Ÿæˆä¸€ä¸ªæœ‰æ—¶æ•ˆçš„tokenä¸²ï¼Œå‘é€ç»™å®¢æˆ·ç«¯<br/>3. å®¢æˆ·ç«¯å‚¨å­˜token,ä¸€èˆ¬éƒ½ä¼šå­˜å‚¨åœ¨localStorageæˆ–è€…cookieé‡Œé¢<br/>4. å®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚æ—¶éƒ½å¸¦æœ‰tokenï¼Œå¯ä»¥å°†å…¶æ”¾åœ¨è¯·æ±‚å¤´é‡Œï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æºå¸¦token<br/>5. æœåŠ¡ç«¯éªŒè¯tokenï¼Œæ‰€æœ‰éœ€è¦æ ¡éªŒèº«ä»½çš„æ¥å£éƒ½ä¼šè¢«æ ¡éªŒtokenï¼Œè‹¥tokenè§£æåçš„æ•°æ®åŒ…å«ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œåˆ™èº«ä»½éªŒè¯é€šè¿‡ï¼Œè¿”å›æ•°æ®<br/> |      |





## æ•°æ®åº“è¡¨

### ç”¨æˆ·

|  å­—æ®µ   | ç±»å‹ |   å¤‡æ³¨   |
| :-----: | :--: | :------: |
|   _id   | str  |    id    |
|  name   | str  |  ç”¨æˆ·å  |
|  email  | str  |   é‚®ç®±   |
|   psw   | num  |   å¯†ç    |
|   sex   | str  |   æ€§åˆ«   |
|  birth  | str  |   ç”Ÿæ—¥   |
|  phone  | str  |   ç”µè¯   |
| explain | str  |   ç­¾å   |
| imgurl  | str  | å¤´åƒåœ°å€ |
|  time   | str  | æ³¨å†Œæ—¶é—´ |
|  grade  | str  | ç”¨æˆ·ç­‰çº§ |
|         |      |          |



### å¥½å‹

|   å­—æ®µ   | ç±»å‹ |                     å¤‡æ³¨                      |
| :------: | :--: | :-------------------------------------------: |
|   _id    | str  |                      id                       |
|  userID  | str  |                    ç”¨æˆ·id                     |
| friendID | str  |                    å¥½å‹id                     |
|   time   | date |                   ç”Ÿæˆæ—¶é—´                    |
|  state   | num  | å¥½å‹çŠ¶æ€(0 å·²ä¸ºå¥½å‹ï¼Œ1 ç”³è¯·ä¸­ï¼Œ2 å¯¹æ–¹æœªåŒæ„ ) |
| lastTime | date |               æœ€åä¸€æ¡æ¶ˆæ¯æ—¶é—´                |



### ç§èŠæ¶ˆæ¯

|   å­—æ®µ   | ç±»å‹ |               å¤‡æ³¨                |
| :------: | :--: | :-------------------------------: |
|   _id    | str  |                id                 |
|  userID  | str  |             å‘é€è€…id              |
| friendID | str  |             æ¥å—è€…id              |
| message  | str  |             å‘é€å†…å®¹              |
|  types   | str  | å†…å®¹ç±»å‹(0æ–‡å­—,1å›¾ç‰‡,2éŸ³é¢‘,3å®šä½) |
|   time   | date |             å‘é€æ—¥æœŸ              |
|  state   | num  |      æ¶ˆæ¯çŠ¶æ€(0å·²è¯»ï¼Œ1æœªè¯»)       |
|          |      |                                   |



### ç¾¤

|   å­—æ®µ   | ç±»å‹ |   å¤‡æ³¨   |
| :------: | :--: | :------: |
|   _id    | str  |    id    |
|  userID  | str  |  ç¾¤ä¸»id  |
|   name   | str  |   ç¾¤å   |
|  imgurl  | str  |  ç¾¤å°é¢  |
|  notice  | str  |  ç¾¤è¯´æ˜  |
|  notice  | str  |  ç¾¤å…¬å‘Š  |
|   time   | date | åˆ›å»ºæ—¥æœŸ |
| groupNum | str  |   ç¾¤å·   |



### ç¾¤æ¶ˆæ¯

|  å­—æ®µ   | ç±»å‹ |   å¤‡æ³¨   |
| :-----: | :--: | :------: |
|   _id   | str  |    id    |
| groupID | str  |   ç¾¤id   |
| userID  | str  | å‘é€è€…id |
| message | str  | å‘é€å†…å®¹ |
|  time   | date | å‘é€æ—¶é—´ |
|  types  | str  | å†…å®¹ç±»å‹ |
|         |      |          |

### ç¾¤æˆå‘˜

|   å­—æ®µ   | ç±»å‹ |         å¤‡æ³¨          |
| :------: | :--: | :-------------------: |
|   _id    | str  |          id           |
| groupID  | str  |         ç¾¤id          |
|  userID  | str  |        ç”¨æˆ·id         |
|   name   | str  |       ç¾¤å†…æ˜µç§°        |
|   time   | date |       åŠ å…¥æ—¥æœŸ        |
|   tip    | num  |      æœªè¯»æ¶ˆæ¯æ•°       |
|  shield  | num  | å…æ‰“æ‰°(0ä¸å±è”½,1å±è”½) |
| lastTime | date |   æœ€åä¸€æ¡æ¶ˆæ¯æ—¶é—´    |





## API DOC

> baseURL: 
>
> æ³¨ï¼šæ‰€æœ‰æ¥å£åå¯¹åº”è·¯ç”±è°ƒç”¨çš„api



### 1.signUp

æè¿°ï¼šæ³¨å†Œç”¨æˆ·

åœ°å€ï¼š`/signup/add`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :--: | :--: | :----: | :--: |
| name | str  | ç”¨æˆ·å |  æ˜¯  |
| mail | str  |  é‚®ç®±  |  æ˜¯  |
| pwd  | str  |  å¯†ç   |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | num  | çŠ¶æ€ç  |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```



### 2.judgeValue

æè¿°ï¼šæŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨

åœ°å€ï¼š`/signup/judge`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ | ç±»å‹ |     è¯´æ˜      | å¿…éœ€ |
| :--: | :--: | :-----------: | :--: |
| data | str  |  ç”¨æˆ·å/é‚®ç®±  |  æ˜¯  |
| type | str  | `name`/`mail` |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |          è¯´æ˜          | å¿…éœ€ |
| :----: | :--: | :--------------------: | :--: |
| status | num  |         çŠ¶æ€ç          |  æ˜¯  |
| result | str  | `0`å­˜åœ¨ æˆ– `>0`:ä¸å­˜åœ¨ |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    "status":200,
    "result":1
}
```



### 3.signIn

æè¿°ï¼šç™»é™†

åœ°å€ï¼š`/signin/match`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ | ç±»å‹ |    è¯´æ˜     | å¿…éœ€ |
| :--: | :--: | :---------: | :--: |
| data | str  | ç”¨æˆ·å/é‚®ç®± |  æ˜¯  |
| psw  | str  |    å¯†ç      |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜   | å¿…éœ€ |
| :----: | :--: | :-----: | :--: |
| status | num  | çŠ¶æ€ç   |  æ˜¯  |
|  name  | str  | ç”¨æˆ·å  |  æ˜¯  |
| imgurl | str  | å¤´åƒurl |  æ˜¯  |
| token  | str  |  token  |  æ˜¯  |
|   id   | str  | ç”¨æˆ·id  |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    "status":200,
    "back":{
        "id":"60a9cb976d91641d68733adf",
        "name":"è¥¿è¥¿",
        "imgurl":"user.jpg",
        "token":"åç«¯ç”Ÿæˆçš„token"
    }
}
```



### 4.searchUser

æè¿°ï¼šæœç´¢ç”¨æˆ·

åœ°å€ï¼š`/search/user`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :---: | :--: | :----: | :--: |
| data  | str  | æœç´¢è¯ |  æ˜¯  |
| token | str  |  éªŒè¯  |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |   è¯´æ˜   | å¿…éœ€ |
| :----: | :--: | :------: | :--: |
| status | str  |  çŠ¶æ€ç   |  æ˜¯  |
| result | str  | ç”¨æˆ·æ•°æ® |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    "status":200,
    "result":[
        {
      	 "imgurl":"user.jpg",
     	 "_id":"60a9cb976d91641d68733adf",
      	 "name":"è¥¿è¥¿",
      	 "email":"123456@qq.com"
        },
        {
          "imgurl":"user.jpg",
          "_id":"60aa4245fc3f843660404cc8",
          "name":"å“¥å“¥",
          "email":"123456789@qq.com"
        }
    ]
}
```



### 5.isFriend

æè¿°ï¼šæ˜¯å¦ä¸ºå¥½å‹

åœ°å€ï¼š`/search/isfriend`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |    è¯´æ˜    | å¿…éœ€ |
| :---: | :--: | :--------: | :--: |
|  uid  | str  |   ç”¨æˆ·å   |  æ˜¯  |
|  fid  | str  | æœç´¢å¯¹è±¡id |  æ˜¯  |
| token | str  |    éªŒè¯    |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |     è¯´æ˜      | å¿…éœ€ |
| :----: | :--: | :-----------: | :--: |
| status | str  | çŠ¶æ€ç 200/400 |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```



### 6.searchGroup

æè¿°ï¼šæœç´¢ç¾¤

åœ°å€ï¼š/search/group

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :---: | :--: | :----: | :--: |
| data  | str  | æœç´¢è¯ |  æ˜¯  |
| token | str  |  éªŒè¯  |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |
|  name  | str  |  ç¾¤å  |  æ˜¯  |
|  _id   | str  |  ç¾¤id  |  æ˜¯  |
| imgurl | str  | ç¾¤å¤´åƒ |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```



### 7.isInGroup

æè¿°ï¼šæ˜¯å¦åœ¨ç¾¤å†…

åœ°å€ï¼š/search/isingroup

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :---: | :--: | :----: | :--: |
|  uid  | str  | ç”¨æˆ·id |  æ˜¯  |
|  gid  | str  |  ç¾¤id  |  æ˜¯  |
| token | str  |  éªŒè¯  |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```





### 8.userDetial

æè¿°ï¼šç”¨æˆ·è¯¦æƒ…

åœ°å€ï¼š`/user/detial`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :---: | :--: | :----: | :--: |
|  id   | str  | ç”¨æˆ·id |  æ˜¯  |
| token | str  |  éªŒè¯  |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |     è¯´æ˜     | å¿…éœ€ |
| :----: | :--: | :----------: | :--: |
| status | str  |    çŠ¶æ€ç     |  æ˜¯  |
|  data  | obj  | ç”¨æˆ·è¯¦æƒ…æ•°æ® |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    data:{
        result:{
           	 createdAt:"2021-05-23T11:53:41.100Z"
			email:"242166@qq.co"
             imgurl:"user.jpg"
			name:"å°èŠ±"
			sex:"asexual"
			time:"2021-05-23T11:53:41.090Z"
			updatedAt:"2021-05-25T08:20:01.765Z"
			_id:"60aa4245fc3f843660404cc8"
        }
    }
}
```

### 9.userUpdate

æè¿°ï¼šç”¨æˆ·ä¿¡æ¯ä¿®æ”¹

åœ°å€ï¼š`/user/update`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |   è¯´æ˜   | å¿…éœ€ |
| :---: | :--: | :------: | :--: |
|  id   | str  |  ç”¨æˆ·id  |  æ˜¯  |
| token | str  |   éªŒè¯   |  æ˜¯  |
| data  | str  | ä¿®æ”¹å†…å®¹ |  æ˜¯  |
|  psw  | str  |   å¯†ç    |  æ˜¯  |
| type  | str  | ä¿®æ”¹ç±»å‹ |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |           è¯´æ˜            | å¿…éœ€ |
| :----: | :--: | :-----------------------: | :--: |
| status | str  | çŠ¶æ€ç 200/300/400/500/201 |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
200ï¼šä¿®æ”¹æˆåŠŸ
300ï¼šç”¨æˆ·åå·²å­˜åœ¨ï¼Œä¿®æ”¹å¤±è´¥
400ï¼šå¤±è´¥
500ï¼šæŠ¥é”™
201ï¼šé‚®ç®±å·²å­˜åœ¨
{
    
}
```



### 10.getMarkName

æè¿°ï¼šè·å–å¥½å‹æ˜µç§°

åœ°å€ï¼š`/user/getmarkname`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :--: | :--: | :----: | :--: |
| uid  | str  | ç”¨æˆ·id |  æ˜¯  |
| fid  | str  | å¥½å‹id |  æ˜¯  |
|      |      |        |      |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |     è¯´æ˜      | å¿…éœ€ |
| :----: | :--: | :-----------: | :--: |
| status | str  | çŠ¶æ€ç 200/500 |  æ˜¯  |
| result | obj  |     æ˜µç§°      |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```





### 11.updateMarkName

æè¿°ï¼šå¥½å‹æ˜µç§°ä¿®æ”¹

åœ°å€ï¼š`/user/updatemarkname`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |     è¯´æ˜     | å¿…éœ€ |
| :---: | :--: | :----------: | :--: |
| token | str  |     æ ¡éªŒ     |  æ˜¯  |
| data  | str  | uid/fid/name |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |     è¯´æ˜      | å¿…éœ€ |
| :----: | :--: | :-----------: | :--: |
| status | str  | çŠ¶æ€ç 200/500 |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```



### 12.applyFriend

æè¿°ï¼š*ç”³è¯·å¥½å‹*

åœ°å€ï¼š`/friend/apply`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |    è¯´æ˜     | å¿…éœ€ |
| :---: | :--: | :---------: | :--: |
| token | str  |    æ ¡éªŒ     |  æ˜¯  |
| data  | str  | uid/fid/msg |  æ˜¯  |
|  msg  | str  |   è¯·æ±‚è¯    |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```



### 13.updateFriendState

æè¿°ï¼š*æ›´æ–°å¥½å‹å…³ç³»ï¼ˆåŒæ„ï¼‰*

åœ°å€ï¼š`/friend/updatefriendstate`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜   | å¿…éœ€ |
| :---: | :--: | :-----: | :--: |
| token | str  |  æ ¡éªŒ   |  æ˜¯  |
| data  | str  | uid/fid |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```



### 14.deleteFriend

æè¿°ï¼š*å¥½å‹çŠ¶æ€æ›´æ–°ï¼ˆæ‹’ç»/åˆ é™¤ï¼‰*

åœ°å€ï¼š`/friend/deletefriend`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜   | å¿…éœ€ |
| :---: | :--: | :-----: | :--: |
| token | str  |  æ ¡éªŒ   |  æ˜¯  |
| data  | str  | uid/fid |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```



### 15.*upload

æè¿°ï¼šæ–‡ä»¶ä¸Šä¼ 

åœ°å€ï¼š`/files/upload`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ | ç±»å‹ |              è¯´æ˜               | å¿…éœ€ |
| :--: | :--: | :-----------------------------: | :--: |
| url  | str  | æ–‡ä»¶ä¿å­˜ç›®å½•ï¼ˆ/user/group/...ï¼‰ |  æ˜¯  |
| name | str  |             æ–‡ä»¶å              |  æ˜¯  |

è¿”å›å€¼ï¼š

| å­—æ®µ | ç±»å‹ |     è¯´æ˜     | å¿…éœ€ |
| :--: | :--: | :----------: | :--: |
| name | str  | ä¿å­˜çš„æ–‡ä»¶å |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```





### 16.getFriend

æè¿°ï¼š*è·å–å¥½å‹åˆ—è¡¨*

åœ°å€ï¼š`/index/getfriend`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |   è¯´æ˜   | å¿…éœ€ |
| :---: | :--: | :------: | :--: |
|  uid  | str  |  ç”¨æˆ·id  |  æ˜¯  |
| state | str  | å…³ç³»çŠ¶æ€ |  æ˜¯  |
| token | str  |   æ ¡éªŒ   |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |       è¯´æ˜        | å¿…éœ€ |
| :----: | :--: | :---------------: | :--: |
| status | str  |      çŠ¶æ€ç        |  æ˜¯  |
| result | str  |     å¥½å‹æ•°æ®      |  æ˜¯  |
|  type  | num  | 0ï¼šå¥½å‹ / 1ï¼šç¾¤èŠ |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    id: ver.friendID._id,
    name: ver.friendID.name,
    markname: ver.markname,
    imgurl: ver.friendID.imgurl,
    lastTime: ver.lastTime,
}
```





### 17.getLastMsg

æè¿°ï¼š*è·å–æœ€åä¸€æ¡å¥½å‹æ¶ˆæ¯*

åœ°å€ï¼š`/index/getlastmsg`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :---: | :--: | :----: | :--: |
| token | str  |  æ ¡éªŒ  |  æ˜¯  |
|  uid  | str  | ç”¨æˆ·id |  æ˜¯  |
|  fid  | str  | å¥½å‹id |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |
| result | str  |        |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    message: ver.message,
      types: ver.types,
      time: ver.time,
}
```





### 18.unreadMsg

æè¿°ï¼š*è·å–å¥½å‹æœªè¯»æ¶ˆæ¯æ•°*

åœ°å€ï¼š`/index/updatemsg`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |   è¯´æ˜   | å¿…éœ€ |
| :---: | :--: | :------: | :--: |
| token | str  |   æ ¡éªŒ   |  æ˜¯  |
|  uid  | str  |  ç”¨æˆ·id  |  æ˜¯  |
|  fid  | str  |  å¥½å‹id  |  æ˜¯  |
| state | num  | æ¶ˆæ¯çŠ¶æ€ |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |
| result | str  | æ¶ˆæ¯æ•° |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```





### 19.updateMsg

æè¿°ï¼š*æ›´æ–°å¥½å‹æœªè¯»æ¶ˆæ¯æ•°*

åœ°å€ï¼š`/index/updatemsg`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |   è¯´æ˜   | å¿…éœ€ |
| :---: | :--: | :------: | :--: |
| token | str  |   æ ¡éªŒ   |  æ˜¯  |
|  uid  | str  |  ç”¨æˆ·id  |  æ˜¯  |
|  fid  | str  |  å¥½å‹id  |  æ˜¯  |
| state | num  | æ¶ˆæ¯çŠ¶æ€ |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |
|        | str  |        |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```





### 20.getGroup

æè¿°ï¼š*è·å–ç¾¤åˆ—è¡¨*

åœ°å€ï¼š`/index/getgroup`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :---: | :--: | :----: | :--: |
| token | str  |  æ ¡éªŒ  |  æ˜¯  |
|  uid  | str  | ç”¨æˆ·id |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |       è¯´æ˜        | å¿…éœ€ |
| :----: | :--: | :---------------: | :--: |
| status | str  |      çŠ¶æ€ç        |  æ˜¯  |
| result | str  |                   |  æ˜¯  |
|  type  | num  | 0ï¼šå¥½å‹ / 1ï¼šç¾¤èŠ |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    gid: ver.groupID._id,
        name: ver.groupID.name,
        markname: ver.name,
        imgurl: ver.groupID.imgurl,
        lastTime: ver.lastTime,
        tip: ver.tip
}
```





### 21.getLastMsg

æè¿°ï¼š*è·å–æœ€åä¸€æ¡ç¾¤æ¶ˆæ¯*

åœ°å€ï¼š`/index/getlastgroupmsg`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ | è¯´æ˜ | å¿…éœ€ |
| :---: | :--: | :--: | :--: |
| token | str  | æ ¡éªŒ |  æ˜¯  |
|  gid  | str  | ç¾¤id |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |
| result | str  |        |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    message: ver.message,
      types: ver.types,
      time: ver.time,
      name: ver.userID.name // è°å‘çš„
}
```





### 22.updateGroupMsg

æè¿°ï¼š*æ›´æ–°ç¾¤æœªè¯»æ¶ˆæ¯æ•°*

åœ°å€ï¼š`/index/updategroupmsg`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

| å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :---: | :--: | :----: | :--: |
| token | str  |  æ ¡éªŒ  |  æ˜¯  |
|  uid  | str  | ç”¨æˆ·id |  æ˜¯  |
|  gid  | str  |  ç¾¤id  |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    
}
```





### 23.msg

æè¿°ï¼š*èŠå¤©æ¶ˆæ¯åˆ†é¡µæŸ¥è¯¢*

åœ°å€ï¼š`/chat/msg`

è¯·æ±‚æ–¹å¼ï¼š**POST**

å‚æ•°ï¼š

|   å­—æ®µ   | ç±»å‹ |     è¯´æ˜     | å¿…éœ€ |
| :------: | :--: | :----------: | :--: |
|  token   | str  |     æ ¡éªŒ     |  æ˜¯  |
|   uid    | str  |    ç”¨æˆ·id    |  æ˜¯  |
|   fid    | str  |    å¥½å‹id    |  æ˜¯  |
| nowPage  | num  |   å½“å‰é¡µæ•°   |  æ˜¯  |
| pageSize | num  | æ¯é¡µæ¶ˆæ¯æ¡æ•° |  æ˜¯  |

è¿”å›å€¼ï¼š

|  å­—æ®µ  | ç±»å‹ |  è¯´æ˜  | å¿…éœ€ |
| :----: | :--: | :----: | :--: |
| status | str  | çŠ¶æ€ç  |  æ˜¯  |
| result | str  |        |  æ˜¯  |

ç¤ºä¾‹ï¼š

```javascript
{
    id: ver._id,
    messagee: ver.message,
    types: ver.types,	// æ¶ˆæ¯ç±»å‹
    time: ver.time,

    fromId: ver.userID._id,
    imgurl: ver.userID.imgurl,
}
```

